<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inventaire FSASPTT</title>

<!-- Styles -->
<style>
    :root {
        --fsas-or: #d4af37;   /* Or ASPTT */
        --fsas-noir: #000000; /* Noir ASPTT */
        --fsas-blanc: #ffffff;
        --fsas-gris: #f4f4f4;
    }

    body {
        font-family: Arial, Helvetica, sans-serif;
        background-color: var(--fsas-gris);
        margin: 0;
        color: var(--fsas-noir);
    }

    header {
        background-color: var(--fsas-noir);
        color: var(--fsas-or);
        display: flex;
        align-items: center;
        padding: 15px;
    }

    header img {
        height: 60px;
        margin-right: 15px;
    }

    header h1 {
        font-size: 1.8em;
        margin: 0;
        font-weight: bold;
    }

    .container {
        max-width: 900px;
        margin: 20px auto;
        padding: 20px;
        background-color: var(--fsas-blanc);
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    h2 {
        color: var(--fsas-noir);
        border-left: 5px solid var(--fsas-or);
        padding-left: 10px;
    }

    label {
        font-weight: bold;
        margin-top: 10px;
        display: block;
    }

    input, select, button {
        width: 100%;
        padding: 8px;
        margin: 5px 0;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 1em;
    }

    button {
        background-color: var(--fsas-or);
        color: var(--fsas-noir);
        border: none;
        cursor: pointer;
        font-weight: bold;
    }

    button:hover {
        background-color: #b88c2f;
    }

    #reader {
        width: 100%;
        max-width: 400px;
        margin: 15px auto;
        border: 2px solid var(--fsas-noir);
    }

    ul {
        list-style: none;
        padding: 0;
    }

    ul li {
        padding: 8px;
        border-bottom: 1px solid #ddd;
        font-size: 0.95em;
    }

    footer {
        text-align: center;
        padding: 10px;
        background-color: var(--fsas-noir);
        color: var(--fsas-or);
        position: fixed;
        width: 100%;
        bottom: 0;
    }
</style>
</head>
<body>

<header>
    <img src="Logo FSASPTT Blanc de‚ï†√ºtoure‚ï†√º.png" alt="Logo FSASPTT">
    <h1>Inventaire FSASPTT</h1>
</header>

<div class="container">
    <h2>Ajouter / Mettre √† jour le mat√©riel</h2>

    <label for="numero">Num√©ro (scan ou saisie)</label>
    <input type="text" id="numero" placeholder="Scannez ou saisissez le code-barres">

    <div id="reader"></div>

    <label for="nom">Nom</label>
    <input type="text" id="nom">

    <label for="utilisateur">Utilisateur</label>
    <input type="text" id="utilisateur">

    <label for="type">Type</label>
      <select id="condition">
      <option value="PC Portable">PC Portable</option>
      <option value="Ecran">Ecran</option>
      <option value="Casque">Casque</option>
        

    <label for="modele">Mod√®le</label>
    <input type="text" id="modele">

    <label for="description">Description</label>
    <input type="text" id="description">

   <label for="service">Service</label>
   <select id="service">
   <option value="">(tous)</option>
       <option value="">Direction G√©n√©rale</option>
  <option value="Administratif et Financier">Administratif et Financier</option>
  <option value="Communication et Marketing">Communication et Marketing</option>
  <option value="Formation, R√©seaux et Politiques Publiques">Formation, R√©seaux et Politiques Publiques</option>
  <option value="Innovation Sportive">Innovation Sportive</option>
  <option value="Syst√®me d'information">Syst√®me d'information</option>
  <option value="J'Mactiv Entreprise">J'Mactiv Entreprise</option>
  <option value="Territoires">Territoires</option>
  </select>


    <label for="date_achat">Date d'achat</label>
    <input type="date" id="date_achat">

    <label for="etat">√âtat</label>
    <select id="etat">
        <option value="Utilis√©">Utilis√©</option>
        <option value="En stock">En stock</option>
        <option value="Sortie de stock">Sortie de stock</option>
    </select>

    <label for="condition">Condition</label>
    <select id="condition">
        <option value="Neuf">Neuf</option>
        <option value="Pas Neuf">Pas Neuf</option>
    </select>

    <label for="reserve">R√©serv√©</label>
    <input type="checkbox" id="reserve">

    <button onclick="ajouterMateriel()">‚úÖ Ajouter / Mettre √† jour</button>

    <h2>Liste du mat√©riel</h2>
    <ul id="materielList"></ul>
</div>

<footer>
    &copy; 2025 FSASPTT - F√©d√©ration Sportive des ASPTT
</footer>

<!-- Librairie scanner compatible iPhone & Android -->
<script src="https://unpkg.com/html5-qrcode"></script>
<script>
    // Gestion du mat√©riel en LocalStorage
    function getMateriel() { return JSON.parse(localStorage.getItem('materiel') || '[]'); }
    function saveMateriel(data) { localStorage.setItem('materiel', JSON.stringify(data)); }

    function ajouterMateriel() {
        const materiel = {
            numero: document.getElementById('numero').value,
            nom: document.getElementById('nom').value,
            utilisateur: document.getElementById('utilisateur').value,
            type: document.getElementById('type').value,
            modele: document.getElementById('modele').value,
            description: document.getElementById('description').value,
            service: document.getElementById('service').value,
            date_achat: document.getElementById('date_achat').value,
            etat: document.getElementById('etat').value,
            condition: document.getElementById('condition').value,
            reserve: document.getElementById('reserve').checked
        };

        let liste = getMateriel();
        const index = liste.findIndex(m => m.numero === materiel.numero);
        if(index !== -1) {
            liste[index] = materiel;
            alert("Mat√©riel mis √† jour !");
        } else {
            liste.push(materiel);
            alert("Mat√©riel ajout√© !");
        }

        saveMateriel(liste);
        chargerMateriel();
        document.getElementById('numero').value = '';
    }

    function chargerMateriel() {
        const liste = getMateriel();
        const ul = document.getElementById('materielList');
        ul.innerHTML = '';
        liste.forEach(m => {
            ul.innerHTML += `<li>
                <b>${m.numero}</b> - ${m.nom} (${m.type}, ${m.modele})<br>
                √âtat: ${m.etat}, Condition: ${m.condition}, ${m.reserve ? 'üìå R√©serv√©' : 'Libre'}
            </li>`;
        });
    }

    // Scanner avec html5-qrcode (compatible iOS/Android)
    function startScanner() {
        const html5QrCode = new Html5Qrcode("reader");
        html5QrCode.start(
            { facingMode: "environment" }, // cam√©ra arri√®re
            { fps: 10, qrbox: 250 },
            (decodedText) => {
                document.getElementById("numero").value = decodedText;
                html5QrCode.stop();
                alert("Code d√©tect√© : " + decodedText);
            },
            (error) => {
                console.warn("Scanning...", error);
            }
        ).catch(err => {
            console.error("Erreur d√©marrage cam√©ra : ", err);
            alert("Impossible d'acc√©der √† la cam√©ra. V√©rifie que tu es en HTTPS et que les permissions sont activ√©es.");
        });
    }

    // Charger la liste au d√©marrage
    window.onload = () => {
        chargerMateriel();
        startScanner();
    };
</script>

</body>
</html>







