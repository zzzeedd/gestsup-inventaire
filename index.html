<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inventaire FSASPTT</title>
<style>
:root {
    --fsas-or: #d4af37;
    --fsas-noir: #000000;
    --fsas-blanc: #ffffff;
    --fsas-gris: #f4f4f4;
}

body {
    font-family: Arial, Helvetica, sans-serif;
    background-color: var(--fsas-gris);
    margin: 0;
    color: var(--fsas-noir);
}

/* Header */
header {
    background-color: var(--fsas-noir);
    color: var(--fsas-or);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    position: relative;
}

header h1 {
    font-size: 1.8em;
    margin: 0;
    text-align: center;
    flex-grow: 1;
}

#menuBtn {
    font-size: 1.8em;
    background: none;
    border: none;
    color: var(--fsas-or);
    cursor: pointer;
}

/* Sidebar */
#sidebar {
    position: fixed;
    top: 0;
    left: -300px;
    width: 280px;
    height: 100%;
    background-color: var(--fsas-blanc);
    box-shadow: 2px 0 5px rgba(0,0,0,0.2);
    padding: 20px;
    overflow-y: auto;
    transition: left 0.3s;
    z-index: 1000;
}
#sidebar.active { left: 0; }

#sidebar h3 { margin-top: 0; }
#sidebar input, #sidebar select { width: 100%; margin-bottom: 10px; padding: 5px; }

/* Container principal */
.container {
    max-width: 900px;
    margin: 20px auto;
    padding: 20px;
    background-color: var(--fsas-blanc);
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

h2 {
    color: var(--fsas-noir);
    border-left: 5px solid var(--fsas-or);
    padding-left: 10px;
}

label {
    font-weight: bold;
    margin-top: 10px;
    display: block;
}

input, select, button {
    width: 100%;
    padding: 8px;
    margin: 5px 0;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 1em;
}

button {
    background-color: var(--fsas-or);
    color: var(--fsas-noir);
    border: none;
    cursor: pointer;
    font-weight: bold;
}
button:hover { background-color: #b88c2f; }

#reader {
    width: 100%;
    max-width: 400px;
    margin: 15px auto;
    border: 2px solid var(--fsas-noir);
}

ul { list-style: none; padding: 0; }
ul li { padding: 8px; border-bottom: 1px solid #ddd; font-size: 0.95em; }

footer {
    text-align: center;
    padding: 10px;
    background-color: var(--fsas-noir);
    color: var(--fsas-or);
    position: fixed;
    width: 100%;
    bottom: 0;
}
</style>
</head>
<body>

<header>
    <button id="menuBtn">&#9776;</button>
    <h1>Inventaire FSASPTT</h1>
    <img src="Logo FSASPTT Blanc de‚ï†√ºtoure‚ï†√º.png" alt="Logo FSASPTT" style="height:60px;">
</header>

<!-- Sidebar menu -->
<div id="sidebar">
  <h3>Historique du mat√©riel</h3>
  <input type="text" id="searchInput" placeholder="Rechercher...">
  
  <label for="filterType">Filtrer par Type :</label>
  <select id="filterType">
    <option value="">Tous</option>
    <option value="Ordinateur">Ordinateur</option>
    <option value="Imprimante">Imprimante</option>
    <option value="Mobilier">Mobilier</option>
  </select>

  <label for="filterService">Filtrer par Service :</label>
  <select id="filterService">
    <option value="">Tous</option>
    <option value="Direction g√©n√©rale">Direction g√©n√©rale</option>
    <option value="Administratif et Financier">Administratif et Financier</option>
    <option value="Marketing Communication Partenariats">Marketing Communication Partenariats</option>
    <option value="Formation, R√©seaux et Politiques Publiques">Formation, R√©seaux et Politiques Publiques</option>
    <option value="Innovation Sportive">Innovation Sportive</option>
    <option value="Syst√®me d'information">Syst√®me d'information</option>
    <option value="J'Mactiv Entreprise">J'Mactiv Entreprise</option>
    <option value="Territoires">Territoires</option>
  </select>

  <ul id="historyList"></ul>
</div>

<div class="container">
    <h2>Ajouter / Mettre √† jour le mat√©riel</h2>

    <label for="numero">Num√©ro (scan ou saisie)</label>
    <input type="text" id="numero" placeholder="Scannez ou saisissez le code-barres">

    <div id="reader"></div>

    <label for="nom">Nom</label>
    <input type="text" id="nom">

    <label for="utilisateur">Utilisateur</label>
    <input type="text" id="utilisateur">

    <label for="type">Type</label>
    <select id="type">
      <option value="PC Portable">PC Portable</option>
      <option value="Ecran">Ecran</option>
      <option value="Casque">Casque</option>
    </select>

    <label for="modele">Mod√®le</label>
    <input type="text" id="modele">

    <label for="description">Description</label>
    <input type="text" id="description">

    <label for="service">Service</label>
    <select id="service">
      <option value="">Tous</option>
      <option value="Direction g√©n√©rale">Direction g√©n√©rale</option>
      <option value="Administratif et Financier">Administratif et Financier</option>
      <option value="Marketing Communication Partenariats">Marketing Communication Partenariats</option>
      <option value="Formation, R√©seaux et Politiques Publiques">Formation, R√©seaux et Politiques Publiques</option>
      <option value="Innovation Sportive">Innovation Sportive</option>
      <option value="Syst√®me d'information">Syst√®me d'information</option>
      <option value="J'Mactiv Entreprise">J'Mactiv Entreprise</option>
      <option value="Territoires">Territoires</option>
    </select>

    <label for="date_achat">Date d'achat</label>
    <input type="date" id="date_achat" readonly>

    <label for="etat">√âtat</label>
    <select id="etat" readonly>
        <option value="Utilis√©">Utilis√©</option>
        <option value="En stock">En stock</option>
        <option value="Sortie de stock">Sortie de stock</option>
    </select>

    <label for="condition">Condition</label>
    <select id="condition" readonly>
        <option value="Neuf">Neuf</option>
        <option value="Pas Neuf">Pas Neuf</option>
    </select>

    <label for="reserve">R√©serv√©</label>
    <input type="checkbox" id="reserve">

    <button onclick="ajouterMateriel()">‚úÖ Ajouter / Mettre √† jour</button>

    <h2>Liste du mat√©riel</h2>
    <ul id="materielList"></ul>
</div>

<footer>
    &copy; 2025 FSASPTT - F√©d√©ration Sportive des ASPTT
</footer>

<script src="https://unpkg.com/html5-qrcode"></script>
<script>
// Hamburger menu
const menuBtn = document.getElementById('menuBtn');
const sidebar = document.getElementById('sidebar');
menuBtn.addEventListener('click', () => sidebar.classList.toggle('active'));
document.addEventListener('click', e => {
    if(!sidebar.contains(e.target) && !menuBtn.contains(e.target)){
        sidebar.classList.remove('active');
    }
});

// Initialisation date auto
document.addEventListener('DOMContentLoaded', () => {
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('date_achat').value = today;
    chargerMateriel();
});

// LocalStorage helpers
function getMateriel() { return JSON.parse(localStorage.getItem('materiel') || '[]'); }
function saveMateriel(data) { localStorage.setItem('materiel', JSON.stringify(data)); }

function ajouterMateriel() {
    const materiel = {
        numero: document.getElementById('numero').value,
        nom: document.getElementById('nom').value,
        utilisateur: document.getElementById('utilisateur').value,
        type: document.getElementById('type').value,
        modele: document.getElementById('modele').value,
        description: document.getElementById('description').value,
        service: document.getElementById('service').value,
        date_achat: document.getElementById('date_achat').value,
        etat: document.getElementById('etat').value,
        condition: document.getElementById('condition').value,
        reserve: document.getElementById('reserve').checked
    };

    let liste = getMateriel();
    const index = liste.findIndex(m => m.numero === materiel.numero);
    if(index !== -1) {
        liste[index] = materiel;
        alert("Mat√©riel mis √† jour !");
    } else {
        liste.push(materiel);
        alert("Mat√©riel ajout√© !");
    }
    saveMateriel(liste);
    chargerMateriel();
    document.getElementById('numero').value = '';
}

// Affichage liste
function chargerMateriel() {
    const liste = getMateriel();
    const ul = document.getElementById('materielList');
    ul.innerHTML = '';
    liste.forEach(m => {
        ul.innerHTML += `<li>
            <b>${m.numero}</b> - ${m.nom} (${m.type}, ${m.modele})<br>
            √âtat: ${m.etat}, Condition: ${m.condition}, ${m.reserve ? 'üìå R√©serv√©' : 'Libre'}
        </li>`;
    });
}

// Scanner QR/Barres
function startScanner() {
    const html5QrCode = new Html5Qrcode("reader");
    html5QrCode.start(
        { facingMode: "environment" },
        { fps: 10, qrbox: 250 },
        (decodedText) => {
            document.getElementById("numero").value = decodedText;
            html5QrCode.stop();
        },
        () => {}
    ).catch(err => console.error(err));
}
window.onload = () => startScanner();

</script>
</body>
</html>
